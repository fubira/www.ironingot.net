<!DOCTYPE html>

  <head>
    <meta charset="utf-8">

    <title>CraftBukkit-1.8 memo</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:300,400,700%7CRaleway:300,700,800,900'" type="text/css">
    <link rel="stylesheet" href="../assets/css/velox.css?v=e61adfe9ef">


    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="canonical" href="index.html">
    <meta name="referrer" content="origin">
    
    <meta property="og:site_name" content="ironingot.net">
    <meta property="og:type" content="article">
    <meta property="og:title" content="CraftBukkit-1.8 memo">
    <meta property="og:description" content="Bukkit/CraftBukkit/Spigot   Mojang配下の公式ではなく、Spigotチームが1.8対応を行ったBukkit/CraftBukkit。今のところ生成物は配布されていないので自力でビルドする必要がある。Java-SDK + gitの環境を整えてあれば java -jar BuildTools.jar で出来上がる。 公式のBukkitコミュニティで開発されたものでないため、今後どうなるかの見通しは不明。ただし公式のBukkitはそれ以上に不明。 看板データの変換問題 CraftBukkit 1.8より一部の内部データがJSON形式で保存されるようになっているが、1.8以前のワールドにおいて作成した看板の文字列にJSONのSyntaxが含まれていた場合、その文字が消えてしまう。  この時問題になるのが、LocketteプラグインでロックをしているワールドをCraftBukkit 1.8でロードすると、 全てのロックチェストの看板の[ ]が消滅し、ロックが外れる という現象が発生する。 セキュリティ強制全解除というあまりにもあんまりな現象のため回避策を探したところ、以下のようにサーバjar起動時のオプションに -DconvertLegacySign=true を追加することで、読み込んだワールドの看板データを変換処理してくれる機能が存在しているのを発見。 $ java...">
    <meta property="og:url" content="https://page-ironingot-fubira.c9.io/craftbukkit-1-8-memo/">
    <meta property="article:published_time" content="2014-12-05T19:49:00.000Z">
    <meta property="article:modified_time" content="2015-10-14T17:10:15.998Z">
    <meta property="article:tag" content="Minecraft">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="CraftBukkit-1.8 memo">
    <meta name="twitter:description" content="Bukkit/CraftBukkit/Spigot   Mojang配下の公式ではなく、Spigotチームが1.8対応を行ったBukkit/CraftBukkit。今のところ生成物は配布されていないので自力でビルドする必要がある。Java-SDK + gitの環境を整えてあれば java -jar BuildTools.jar で出来上がる。 公式のBukkitコミュニティで開発されたものでないため、今後どうなるかの見通しは不明。ただし公式のBukkitはそれ以上に不明。 看板データの変換問題 CraftBukkit 1.8より一部の内部データがJSON形式で保存されるようになっているが、1.8以前のワールドにおいて作成した看板の文字列にJSONのSyntaxが含まれていた場合、その文字が消えてしまう。  この時問題になるのが、LocketteプラグインでロックをしているワールドをCraftBukkit 1.8でロードすると、 全てのロックチェストの看板の[ ]が消滅し、ロックが外れる という現象が発生する。 セキュリティ強制全解除というあまりにもあんまりな現象のため回避策を探したところ、以下のようにサーバjar起動時のオプションに -DconvertLegacySign=true を追加することで、読み込んだワールドの看板データを変換処理してくれる機能が存在しているのを発見。 $ java...">
    <meta name="twitter:url" content="https://page-ironingot-fubira.c9.io/craftbukkit-1-8-memo/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "ironingot.net",
    "author": {
        "@type": "Person",
        "name": "fubira",
        "image": "//www.gravatar.com/avatar/6921f11655432d404de3bc8f1c2f1063?s=250&d=mm&r=x",
        "url": "https://page-ironingot-fubira.c9.io/author/fubira",
        "sameAs": null,
        "description": null
    },
    "headline": "CraftBukkit-1.8 memo",
    "url": "https://page-ironingot-fubira.c9.io/craftbukkit-1-8-memo/",
    "datePublished": "2014-12-05T19:49:00.000Z",
    "dateModified": "2015-10-14T17:10:15.998Z",
    "keywords": "Minecraft",
    "description": "Bukkit/CraftBukkit/Spigot   Mojang配下の公式ではなく、Spigotチームが1.8対応を行ったBukkit/CraftBukkit。今のところ生成物は配布されていないので自力でビルドする必要がある。Java-SDK + gitの環境を整えてあれば java -jar BuildTools.jar で出来上がる。 公式のBukkitコミュニティで開発されたものでないため、今後どうなるかの見通しは不明。ただし公式のBukkitはそれ以上に不明。 看板データの変換問題 CraftBukkit 1.8より一部の内部データがJSON形式で保存されるようになっているが、1.8以前のワールドにおいて作成した看板の文字列にJSONのSyntaxが含まれていた場合、その文字が消えてしまう。  この時問題になるのが、LocketteプラグインでロックをしているワールドをCraftBukkit 1.8でロードすると、 全てのロックチェストの看板の[ ]が消滅し、ロックが外れる という現象が発生する。 セキュリティ強制全解除というあまりにもあんまりな現象のため回避策を探したところ、以下のようにサーバjar起動時のオプションに -DconvertLegacySign=true を追加することで、読み込んだワールドの看板データを変換処理してくれる機能が存在しているのを発見。 $ java..."
}
    </script>

    <meta name="generator" content="Ghost 0.7">
    <link rel="alternate" type="application/rss+xml" title="ironingot.net" href="../rss/index.html">
  </head>
  <body>
    


<header class="main-header text center">

  <div class="no-cover site_width padding border solid bottom">
    <nav>
      <a href="../" class="inline blog-logo-extra-border border circle">
        <img src="../content/images/2015/10/ironingotnet.png" alt="ironingot.net" class="blog-logo center border circle">
      </a>
    </nav>
    <div class="site_width">
      <div class="blog-title"><a href="../">ironingot.net</a></div>
      <p class="blog-description">minecraft server
</p>
    </div>

    <div class="margin_top">
  <h1>
    <a href="https://github.com/fubira" target="_blank"><i class="fa fa-github"></i></a> 
    <a href="mailto:fubira@gmail.com" target="_blank"><i class="fa fa-envelope-square"></i></a>
    <!--
    <a href="https://twitter.com/fubira" target="_blank"><i class="fa fa-twitter-square"></i></a>&nbsp;
    <a href="#" target="_blank"><i class="fa fa-linkedin-square"></i></a>&nbsp;
    <a href="#" target="_blank"><i class="fa fa-instagram"></i></a>&nbsp;
    -->
  </h1>
</div>  </div>

</header>

<main class="site_width padding" role="main">
  <article class="post tag-minecraft">
    <header class="post-header">
      <h1>CraftBukkit-1.8 memo</h1>
      <time datetime="2014-12-05">Friday, December 05, 2014</time>
    </header>

    <div class="entry margin_bottom">
      <h2 id="bukkitcraftbukkitspigot">Bukkit/CraftBukkit/Spigot  </h2>

<p>Mojang配下の公式ではなく、Spigotチームが1.8対応を行ったBukkit/CraftBukkit。今のところ生成物は配布されていないので自力でビルドする必要がある。Java-SDK + gitの環境を整えてあれば java -jar BuildTools.jar で出来上がる。</p>

<p>公式のBukkitコミュニティで開発されたものでないため、今後どうなるかの見通しは不明。ただし公式のBukkitはそれ以上に不明。</p>

<hr>

<h4 id="">看板データの変換問題</h4>

<p>CraftBukkit 1.8より一部の内部データがJSON形式で保存されるようになっているが、1.8以前のワールドにおいて作成した看板の文字列にJSONのSyntaxが含まれていた場合、その文字が消えてしまう。 <br>
この時問題になるのが、LocketteプラグインでロックをしているワールドをCraftBukkit 1.8でロードすると、</p>

<p><strong>全てのロックチェストの看板の[ ]が消滅し、ロックが外れる</strong></p>

<p>という現象が発生する。</p>

<p><img src="../content/images/2015/10/2014-12-06_04-22-32.jpg" alt="ロックが機能していない状態"></p>

<p>セキュリティ強制全解除というあまりにもあんまりな現象のため回避策を探したところ、以下のようにサーバjar起動時のオプションに -DconvertLegacySign=true を追加することで、読み込んだワールドの看板データを変換処理してくれる機能が存在しているのを発見。</p>

<p><code>$ java -Xmx1024M -Xms1024M -DconvertLegacySigns=true -jar craftbukkit.jar</code></p>

<p>変換と同時に看板の内部データに変換済みのフラグを埋め込むため、2重3重に変換がかかる心配はないが、1.8でこのフラグ無しですでに読み込んでしまったワールドは変換処理をせずJSON型で保存済みのため、その後 convertLegacySigns を有効にすると2重変換がかかり、下記のように看板の内容が破損する。</p>

<p><img src="/content/images/2015/10/2014-12-06_03-40-31.jpg" alt="空行が null になり、文章行は "></p>

<p>すでに1.8で起動してしまったワールドを今後も使いたい場合、後からconvertLegacySignsを設定するのはおすすめできない。泣きながらワールド中の看板を貼り直すことになる可能性が高い。</p>

<p><strong>そんな状況に陥らないためにもバックアップを忘れずに。</strong></p>

<p>※このフラグの情報が現状出てないのは、このようにワールドを壊す危険性が高いからだと推測される。また公にしていない以上、今後仕様を変えてくる可能性も考えられる。</p>

<hr>

<p>各プラグインの対応状況</p>

<h3 id="worldeditworldguardpermissionsexessentials">WorldEdit, WorldGuard, PermissionsEx, Essentials</h3>

<p>Guavaのバージョンアップに伴って問題の出る主要プラグインをSpigotチームが独自に配布している。</p>

<h3 id="multiverse">Multiverse</h3>

<p>開発関係者が1.8でも問題ないと発言</p>

<h3 id="dynmap">Dynmap</h3>

<p>dev版が出ている</p>

<h3 id="lockette">Lockette</h3>

<p>前述の看板データ変換問題がある
現行のもので動作は問題ない</p>

<h3 id="blockhat">BlockHat</h3>

<p>現状エラーが出て動かない。
メンテも長らくされてないので今後が怪しい。</p>

<h3 id="playerheads">PlayerHeads</h3>

<p>現状動かないけどそこそこ頻繁にメンテされているのでそのうち対応されると思われる</p>

<h3 id="hawkeye">HawkEye</h3>

<p>エラーは出てないけどブロック増えてる分の挙動は不明</p>
    </div>

    <footer class="author-post relative">

      <div class="author-thumb inline middle">
        <img src="https://www.gravatar.com/avatar/6921f11655432d404de3bc8f1c2f1063?s=250&amp;d=mm&amp;r=x" alt="Author image" class="border circle">
      </div>

      <div class="inline middle align vertical">
        <div><a href="../author/fubira/">fubira</a></div>
        <div></div>
      </div>

    </footer>

  </article>
</main>



    <footer class="site-footer text center padding">
      <div>© 2015 <a href="../">ironingot.net</a>. All rights reserved.</div>
      <div><a href="https://github.com/dreyacosta/velox" target="_blank"><strong>Velox theme</strong></a> by <a href="http://dreyacosta.com/">David Rey</a></div>
      <div>Proudly published with <a href="http://ghost.org"><span>Ghost</span></a></div>
    </footer>

    <!-- jQuery bxslider -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<!-- Load javascript -->
<script type="text/javascript" src="../assets/bxslider/jquery.bxslider.min.js?v=e61adfe9ef"></script>

<!-- Link CSS -->
<link href="../assets/bxslider/jquery.bxslider.min.css?v=e61adfe9ef" rel="stylesheet">

<!-- Initiate instances -->
<script type="text/javascript" src="../assets/bxslider/options/options.bxslider.js?v=e61adfe9ef"></script>

<!-- jQuery bxslider end -->
    <script>
  var cb = function() {
    var createLink = function(source) {
      var l = document.createElement('link'); l.rel = 'stylesheet';
      l.href = source;
      var h = document.getElementsByTagName('head')[0]; h.appendChild(l, h);
    };
    // createLink('//fonts.googleapis.com/css?family=Merriweather:300,400,700%7CRaleway:300,700,800,900');
    createLink('//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css');
  };

  var raf = requestAnimationFrame || mozRequestAnimationFrame ||
      webkitRequestAnimationFrame || msRequestAnimationFrame;
  if (raf) { raf(cb); } else { window.addEventListener('load', cb); }
</script>    <script>
  (function() {
    var l = document.createElement('script'); l.type = 'text/javascript'; l.async = true;
    l.src = '/assets/lib/prism/prism.js?v=e61adfe9ef';
    var h = document.getElementsByTagName('head')[0]; h.appendChild(l, h);
  }());

  var highlightAll = function() {
    Prism.highlightAll();
  };

  window.addEventListener('load', highlightAll);
</script>
  </body>
</html>